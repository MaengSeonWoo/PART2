<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout" 
layout:decorate="~{layout/ad_layout}"  layout:fragment="Content">


<!-- <div class="right_col" role="main"> -->
	<div class="right_col">
                <div class="">
                    <div class="page-title">
                        <div class="title_left">
                            <h3>Î≥µÏßÄ Ï†ïÏ±Ö Îì±Î°ù</h3>
                        </div>

                        <div class="title_right">
                            <div class="col-md-5 col-sm-5 form-group pull-right top_search">
                                <div class="input-group">
                                    <input type="text" class="form-control" placeholder="Search for...">
                                    <span class="input-group-btn">
                                        <button class="btn btn-default" type="button">Go!</button>
                                    </span>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="clearfix"></div>

                    <div class="row">
                        <div class="col-md-12 col-sm-12">
                            <div class="x_panel">
                                <div class="x_title">
                                    <h2>Ï†ïÏ±ÖÏùÑ ÌèºÏñëÏãùÏóê ÎßûÍ≤å Îì±Î°ùÌï¥ Ï£ºÏÑ∏Ïöî<small>* Ï∞çÌûå Î∂ÄÎ∂ÑÏùÄ ÌïÑÏàò ÏûÖÎ†•Í∞íÏûÖÎãàÎã§</small></h2>
                                    <ul class="nav navbar-right panel_toolbox">
                                        <li><a class="collapse-link"><i class="fa fa-chevron-up"></i></a>
                                        </li>
                                        <li class="dropdown">
                                            <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false"><i class="fa fa-wrench"></i></a>
                                            <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
                                                <a class="dropdown-item" href="#">Settings 1</a>
                                                <a class="dropdown-item" href="#">Settings 2</a>
                                            </div>
                                        </li>
                                        <li><a class="close-link"><i class="fa fa-close"></i></a>
                                        </li>
                                    </ul>
                                    <div class="clearfix"></div>
                                </div>
                                <div class="x_content">
                                    <form name="insertWelfare"  th:action="@{/admin/new}" method="post">
                                        <p>ÎÇ¥Ïö©ÏùÑ ÏûÖÎ†•Ìï¥ Ï£ºÏÑ∏Ïöî</p>
                                        <span class="section">Ï†ïÎ≥¥ ÏûÖÎ†•</span>
                                        
                                        <div class="field item form-group">
                                            <label class="col-form-label col-md-3 col-sm-3  label-align">ÏÑúÎπÑÏä§ ID<span class="required">*</span></label>
                                            <div class="col-md-6 col-sm-6">
                                                <input class="form-control" data-validate-length-range="6" data-validate-words="2" name="servId" th:field="${welfare.servId}" required="required">
                                            </div>
                                        </div>
                                       <div class="field item form-group">
                                            <label class="col-form-label col-md-3 col-sm-3  label-align">ÏÑúÎπÑÏä§Î™Ö<span class="required">*</span></label>
                                            <div class="col-md-6 col-sm-6">
                                                <input class="form-control" data-validate-length-range="6" data-validate-words="2" name="servName" th:field="${welfare.servName}" required="required" />
                                            </div>
                                        </div>
                                         <div class="field item form-group">
                                            <label class="col-form-label col-md-3 col-sm-3  label-align">ÏãúÌñâ ÏãúÏûë ÏùºÏûê<span class="required">*</span></label>
                                            <div class="col-md-6 col-sm-6">
                                                <input class="form-control date" type="date" name="startDate" th:field="${welfare.startDate}" required='required'></div>
                                        </div>
                                        <div class="field item form-group">
                                            <label class="col-form-label col-md-3 col-sm-3  label-align">ÏãúÌñâ Ï¢ÖÎ£å ÏùºÏûê<span class="required">*</span></label>
                                            <div class="col-md-6 col-sm-6">
                                                <input class="form-control date" type="date" name="endDate" th:field="${welfare.endDate}" required='required'></div>
                                        </div>
                                        <div class="field item form-group">
                                            <label class="col-form-label col-md-3 col-sm-3  label-align">ÏÇ¨ÏóÖÎã¥ÎãπÎ∂ÄÏÑúÎ™Ö<span class="required">*</span></label>
                                            <div class="col-md-6 col-sm-6">
                                                <input class="form-control" data-validate-length-range="6" data-validate-words="2" name="bizDept" th:field="${welfare.bizDept}"  required="required" />
                                            </div>
                                        </div>
                                        <div class="field item form-group">
                                            <label class="col-form-label col-md-3 col-sm-3  label-align">ÏãúÎèÑÎ™Ö</label>
                                            <div class="col-md-6 col-sm-6">
                                                <input class="form-control" data-validate-length-range="6" data-validate-words="2" name="sido" th:field="${welfare.sido}" />
                                            </div>
                                        </div>
                                        <div class="field item form-group">
                                            <label class="col-form-label col-md-3 col-sm-3  label-align">ÏãúÍµ∞Íµ¨Î™Ö</label>
                                            <div class="col-md-6 col-sm-6">
                                                <input class="form-control" data-validate-length-range="6" data-validate-words="2" name="sgg"  th:field="${welfare.sgg}"/>
                                            </div>
                                        </div>
                                        <div class="field item form-group">
                                            <label class="col-form-label col-md-3 col-sm-3  label-align">Í∞ÄÍµ¨ÏÉÅÌô©Î™Ö<span class="required">*</span></label>
                                            <div class="col-md-6 col-sm-6">
                                                <input class="form-control" data-validate-length-range="6" data-validate-words="2" name="household" th:field="${welfare.household}"  required="required" />
                                            </div>
                                        </div>
                                        <div class="field item form-group">
                                            <label class="col-form-label col-md-3 col-sm-3  label-align">Í¥ÄÏã¨Ï£ºÏ†úÎ™Ö<span class="required">*</span></label>
                                            <div class="col-md-6 col-sm-6">
                                                <input class="form-control" data-validate-length-range="6" data-validate-words="2" name="likeSubject" th:field="${welfare.likeSubject}"  required="required" />
                                            </div>
                                        </div>
                                        <div class="field item form-group">
                                            <label class="col-form-label col-md-3 col-sm-3  label-align">ÏßÄÏõêÏ£ºÍ∏∞Î™Ö</label>
                                            <div class="col-md-6 col-sm-6">
                                                <input class="form-control" data-validate-length-range="6" data-validate-words="2"  name="supPeriod" th:field="${welfare.supPeriod}" />
                                            </div>
                                        </div>
                                        <div class="field item form-group">
                                            <label class="col-form-label col-md-3 col-sm-3  label-align">Ï†úÍ≥µÏú†ÌòïÎ™Ö<span class="required">*</span></label>
                                            <div class="col-md-6 col-sm-6">
                                                <input class="form-control" data-validate-length-range="6" data-validate-words="2" name="provType" th:field="${welfare.provType}"  required="required" />
                                            </div>
                                        </div>
                                        <div class="field item form-group">
                                            <label class="col-form-label col-md-3 col-sm-3  label-align">ÏßÄÏõêÎåÄÏÉÅ ÎÇ¥Ïö©<span class="required">*</span></label>
                                            <div class="col-md-6 col-sm-6">
                                                <input class="form-control" data-validate-length-range="6" data-validate-words="2" name="supTarget" th:field="${welfare.supTarget}"  required="required" />
                                            </div>
                                        </div>
                                        <div class="field item form-group">
                                            <label class="col-form-label col-md-3 col-sm-3  label-align">Í∏âÏó¨ÏÑúÎπÑÏä§ ÎÇ¥Ïö©<span class="required">*</span></label>
                                            <div class="col-md-6 col-sm-6">
                                                <input class="form-control" data-validate-length-range="6" data-validate-words="2" name="salServ"  th:field="${welfare.salServ}" required="required" />
                                            </div>
                                        </div>
                                        <div class="field item form-group">
                                            <label class="col-form-label col-md-3 col-sm-3  label-align">Ïã†Ï≤≠Î∞©Î≤ï ÎÇ¥Ïö©<span class="required">*</span></label>
                                            <div class="col-md-6 col-sm-6">
                                                <input class="form-control" data-validate-length-range="6" data-validate-words="2" name="appWay" th:field="${welfare.appWay}" required="required" />
                                            </div>
                                        </div>
                                       <div class="field item form-group">
                                            <label class="col-form-label col-md-3 col-sm-3  label-align">ÏÑ†Ï†ïÍ∏∞Ï§Ä ÎÇ¥Ïö©<span class="required">*</span></label>
                                            <div class="col-md-6 col-sm-6">
                                                <input class="form-control" data-validate-length-range="6" data-validate-words="2" name="selStandard"  th:field="${welfare.selStandard}" required="required" />
                                            </div>
                                        </div>
                                        <div class="field item form-group">
                                            <label class="col-form-label col-md-3 col-sm-3  label-align">üò≠üò≠ Ï≤®Î∂ÄÌååÏùº üò≠üò≠ </label>
                                            <div class="col-md-6 col-sm-6">
                                                <input type="file" class="form-control" data-validate-length-range="6" data-validate-words="2"  name="name" />
                                        </div>
                                        </div>
                                        <div class="field item form-group">
                                            <label class="col-form-label col-md-3 col-sm-3  label-align">ÏÑúÎπÑÏä§ ÏöîÏïΩ<span class="required" >*</span></label>
                                            <div class="col-md-6 col-sm-6">
                                                <textarea required="required" name='servSummary' th:field="${welfare.servSummary}"></textarea></div>
                                        </div>
                                        <div class="ln_solid">
                                            <div class="form-group">
                                                <div class="col-md-6 offset-md-3">
                                                    <button type='submit' class="btn btn-primary" id="updateBtn">Îì±Î°ù</button>
                                                   <button type="button" class="btn btn-danger" th:onclick="|location.href='@{/admin/welfare}'|">Ï∑®ÏÜå</button>
                                                    
                                                </div>
                                            </div>
                                        </div>
                                    </form>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
			</div>        


            <script>
            //$('form[name="updateForm" button]').on('click',updateAjax);
            $('#updateBtn').on('click', updateAjax);
    
            function updateAjax(event) {
                let dataObj = getEmpObj();
    
                console.log(dataObj);
                $.ajax('update', {
                    type: 'post',	// ÌÜµÏã†Ìï† Îïå method : get, post, put, delete
                    // => ÏïÑÎûò ÌïúÏ§Ñ : Ïª§Îß®ÎìúÍ∞ùÏ≤¥, @RequestParam
                    //data : dataObj		// Îç∞Ïù¥ÌÉÄÎäî Í∏∞Î≥∏ Í∞ùÏ≤¥ÌÉÄÏûÖÎßå Î∞õÎäîÎã§, ÏûêÎèôÏúºÎ°ú QueryStringÎ≥ÄÌôò
    
                    // => ÏïÑÎûò ÎëêÏ§Ñ : @RequestBody
                    contentType: 'application/json',
                    data: JSON.stringify(dataObj)	//@RequestBodyÎ°ú ÏöîÏ≤≠ÎêúÍ≤ÉÏù¥Îùº jsonÏúºÎ°úÎ≥¥ÎÉÑ
                })
                    .done(result => {
                        console.log(result);
                    })
                    .fail(err => console.log(err));
    
    
                $ajax('update', {
                    type: 'post',
                    data: dataObj
                })
                    .done(r => {
                        console.log(r);
                    })
                    .fail(err => console.log(err));
            }
    
            function getEmpObj() {
                let formAry = $('form[name="updateForm"]').serializeArray();
                // serializeArray => [{ name : 'empid', value : '205'},{ name : 'empname', value : 'ÏÇ¨Ïø†'}, ... ]
                // ÌèºÏùÄ Î∞∞Ïó¥ÌòïÌÉúÎ°ú ÎÑòÏñ¥Í∞àÏàò ÏóÜÏñ¥ÏÑú Í∞ùÏ≤¥Î°ú ÎßåÎì§Ïñ¥Ï§òÏïºÌï® 
                // javascriptÏóêÏÑ† FormData
    
                let formObj = {};
                $.each(formAry, function (idx, input) {
                    // input = { name : 'empid', value : '205'} ÌòïÌÉúÎ•º
                    // => { empid : 205 } ÌòïÌÉúÎ°ú Î∞îÍøîÏ§òÏïºÌï®
                    formObj[input.name] = input.value;
                    // formObj['empid'] = '205';
                    // formObj.empid == formObj['empid']  
                });
    
                return formObj;
                console.log(formAry);
                //=> { empid : 205 } Î°ú ÎÇòÏò¥
    
            }

</script>

</html>