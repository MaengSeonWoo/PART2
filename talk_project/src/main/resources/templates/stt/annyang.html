<!DOCTYPE html>
<html xmlns:th="https://www.thymeleaf.org/">
<head>
<meta charset="UTF-8">
<title>WishğŸ•ğŸ™„</title>
<script
	src="//cdnjs.cloudflare.com/ajax/libs/annyang/2.6.0/annyang.min.js"></script>
<script
	src="//cdnjs.cloudflare.com/ajax/libs/SpeechKITT/0.3.0/speechkitt.min.js"></script>
</head>
<body>

	<div id="state"></div>
	<div id="analyzedText"></div>
	<div id="recognizedText"></div>

	<script type="text/javascript">

	if (annyang) {
        const urlMapping = {
            'ë³µì§€': 'http://localhost:8080/calendar/list'
        };
        // ë¬¸ì¥ ì„œë²„ë¡œì „ì†¡í›„ë¶„ì„
        annyang.addCallback('result', function(phrases) {
            document.getElementById('recognizedText').innerHTML = "Recognized: " + phrases[0];
            console.log("Recognized phrases: ", phrases);
            annyang.debug(); 
            fetch('/analyze', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify({ text: phrases[0] }),
            })
            .then(response => response.json())
            .then(data => {
                document.getElementById('analyzedText').innerHTML = "Analyzed: " + data.join(', ');
				//ë‹¨ì–´ë§¤ì¹­
                data.forEach(word => {
                    if (urlMapping[word]) {
                        window.location.href = urlMapping[word];
                    }
                });
            });
        });
        annyang.setLanguage('ko');
        SpeechKITT.annyang();
        SpeechKITT.setStylesheet('//cdnjs.cloudflare.com/ajax/libs/SpeechKITT/0.3.0/themes/flat.css');
        SpeechKITT.vroom();
    }
	
	document.getElementById('skitt-listening-text__instructions').innerHTML = 'ë¬´ì—‡ì„ ë„ì™€ë“œë¦´ê¹Œìš”?'; 
	</script>

</body>
</html>