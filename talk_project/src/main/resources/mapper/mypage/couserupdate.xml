<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace='com.talk.app.mypage.mapper.CoUserUpdateMapper'>
	<!-- 기업회원 단건조회 -->
	<select id = "selectCoUserInfo" resultType="CoUserVO">
		SELECT co_user_no
			  , co_reg_no
			  , co_name
			  , industry
			  , rep_name
			  , est_year
			  , co_post_no
			  , co_addr
			  , co_detail_addr
			  , main_business
			  , region
			  , etc
			  , co_user_id
			  , co_user_pw
			  , mgr_name
			  , mgr_email
			  , mgr_tel
			  , approval_status
			  , co_contact
			  , authority
			  , logo_img
			  , file_path
			  <!-- , file_path -->
			  FROM company_user c JOIN files f
			  ON c.co_user_no = f.domain_id
			  WHERE co_user_id = #{coUserId}
			  <!-- FROM company_user
			  WHERE co_user_id = #{coUserId} -->
	</select>
	
	<!-- 기업회원 정보 수정 -->
	<update id = "updateCoUserInfo">
		UPDATE company_user
		SET co_name = #{coName},
			industry = #{industry},
			rep_name = #{repName},
			co_post_no = #{coPostNo},
			co_addr= #{coAddr},
			co_detail_addr = #{coDetailAddr},
			main_business = #{mainBusiness},
			region = #{region},
			etc = #{etc},
			<if test = "coUserPw != null and coUserPw != ''">
			co_user_pw = #{coUserPw},
			</if>
			mgr_name = #{mgrName},
			mgr_email = #{mgrEmail},
			mgr_tel = #{mgrTel},
			<if test = "logoImg != null and logoImg != ''">
			logo_img = #{logoImg},
			</if>
			co_contact = #{coContact}
		WHERE co_user_id = #{coUserId}
	</update>
	
	<!-- ======================================================================== -->
	<select id = "selectUserInfo" resultType="UserVO">
		SELECT USER_NO
				,USER_NAME
				,USER_PW
				,TEL
				,POST_NO
				,ADDR
				,DETAIL_ADDR
				,EMAIL
				,BIRTH
				,HOUSEHOLD
				,GENDER
				,USER_ID
				,AUTHORITY
		FROM users
		WHERE user_id = #{userId}
	</select>
	
	<update id = "updateUserInfo">
		UPDATE users
		SET user_name = #{userName}
			<if test = "userPw != null and userPw != ''">
			,USER_PW = #{userPw}
			</if>
			,TEL = #{Tel}
			,POST_NO = #{postNo}
			,ADDR = #{addr}
			,DETAIL_ADDR = #{detailAddr}
			,EMAIL = #{email}
			,BIRTH = #{birth}
			,HOUSEHOLD = #{household}
			,GENDER = #{gender}
		WHERE user_id = #{userId}
	</update>
</mapper>